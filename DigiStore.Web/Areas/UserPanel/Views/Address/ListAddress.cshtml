@model DigiStore.Domain.ViewModels.Address.FilterAddressVieweModel
@{
    ViewData["Title"] = "آدرس های" + "\t" + User.Identity.Name;
    Layout = "~/Views/Shared/_Layout.cshtml";
}



@await Component.InvokeAsync("UserSidebar")

<div class="col-lg-9 col-md-8 col-xs-12 pull-right">
    <div class="d-block">
        <div class="profile-content">
            <div class="headline-profile">
                <span>آدرس  های من</span>
            </div>
            <div class="profile-stats">
                <div class="profile-address">
                    <div class="box-header">
                        <span class="box-title">نشانی ما</span>
                    </div>
                    @if (Model.Addresses != null && Model.Addresses.Any())
                    {
                        foreach (var item in Model.Addresses)
                        {
                            <div class="profile-address-item">
                                <div class="profile-address-item-top">
                                    <div class="profile-address-item-title">@item.Address1</div>
                                    <div class="ui-more">
                                        <form method="post" asp-controller="Address" asp-action="DeleteAddress" class="float-left">
                                            <button onclick="Tests(@item.AddressId)" class="btn-remove-address btn btn-danger" type="submit">حذف</button>
                                            <input type="hidden" name="id" value="@item.AddressId" />
                                        </form>
                                    </div>
                                </div>

                                <div class="profile-address-content">
                                    <ul class="profile-address-info">
                                        <li>
                                            <div class="profile-address-info-item location">
                                                <i class="mdi mdi-map-outline"></i>
                                                @(item.State+" "+item.City)
                                            </div>
                                        </li>
                                        <li>
                                            <div class="profile-address-info-item location">
                                                <i class="mdi mdi-email-outline"></i>
                                                کد پستی : @item.PostalCode
                                            </div>
                                        </li>
                                        <li>
                                            <div class="profile-address-info-item location">
                                                <i class="mdi mdi-email-outline"></i>
                                                پلاک : @item.Zipcode

                                            </div>
                                        </li>
                                        <li>
                                            <div class="profile-address-info-item location">
                                                <i class="mdi mdi-house"></i>
                                                واحد : @(item.Zipcode==null?" وارد نشده": item.Unit)

                                            </div>
                                        </li>
                                        <li class="location-link">
                                            <a href="#" class="edit-address-link" onclick="document.getElementById('modal').style.display='block'">
                                                ویرایش
                                                نشانی
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        }
                    }
                    <hr />
                    <div class="card bg-light text-dark">
                        <div class="card-body">
                            <i class="fa fa-map-marker" style="color: blue" aria-hidden="true"></i>
                            <a href="#" class="edit-address-link  " onclick="AddAddress()">
                                <span> افزودن آدرس جدید</span>
                            </a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--       modal----------------------->
<div class="remodal-overlay" id="modal">
    <div class="col-lg-8 col-md-8 col-xs-12 mx-auto">
        <div class="remodal">
            <a href="#" class="remodal-close close-profile-address"
               onclick="closemodal()"><i class="fa fa-close"></i></a>
            <div id="modalbody" class="middle-container">

            </div>
        </div>
    </div>
</div>

@section Scripts
{
    <script>
        function AddAddress() {
            $.ajax({
                url: "/Address/AddAddress",
                type: "Get"
            }).done(function (result) {
                $("#modal").modal('show');
                $("#modalbody").html(result);
            });
        }
        function closemodal() {
            $("#modal").modal('hide');
        }
    </script>

    
}